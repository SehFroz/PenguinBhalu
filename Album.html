<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PratyNoor Album</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      overflow-x: hidden;
      background-size: cover;
      background-position: center;
    }

    /* Left Panel */
    .left-panel {
      position: fixed;
      top: 0;
      left: 0;
      width: 60px;
      height: 100%;
      background: rgba(0,0,0,0.5);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 10px 0;
      z-index: 1000;
    }
    .left-panel button {
      background: white;
      border: none;
      margin: 10px 0;
      padding: 10px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 18px;
    }

    /* Gallery */
    .gallery {
      margin-left: 80px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 15px;
      padding: 20px;
    }
    .gallery img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 10px;
      cursor: pointer;
      transition: transform 0.3s;
    }
    .gallery img:hover {
      transform: scale(1.05);
    }

    /* Expanded Image */
    .lightbox {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.9);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 2000;
    }
    .lightbox img {
      max-width: 90%;
      max-height: 90%;
      border-radius: 10px;
    }
    .lightbox:active { display: none; }

    /* Flying Hearts */
    .flying-heart {
      position: fixed;
      animation: floatUp 1.4s linear;
    }
    @keyframes floatUp {
      from { transform: translateY(0); opacity: 1; }
      to { transform: translateY(-200px); opacity: 0; }
    }

    /* Popup */
    #heart-popup {
      position: fixed;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 20px;
      border-radius: 12px;
      display: none;
      z-index: 3000;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    #heart-popup button {
      margin-top: 10px;
      padding: 8px 16px;
      border: none;
      background: crimson;
      color: white;
      border-radius: 6px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <!-- Left Panel -->
  <div class="left-panel">
    <button id="send-heart">‚ù§Ô∏è</button>
    <button id="send-star">‚≠ê</button>
    <button id="send-petal">üå∏</button>
    <button id="toggle-theme">üåô</button>
  </div>

  <!-- Gallery -->
  <div class="gallery" id="gallery"></div>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox">
    <img id="lightbox-img" src="">
  </div>

  <!-- Popup -->
  <div id="heart-popup">
    <p>Press to send infinite hearts to your Praty ‚ù§Ô∏è</p>
    <button id="confirm-heart">Send</button>
  </div>

  <!-- Audio -->
  <audio id="theme-audio" loop></audio>

  <script>
    const body = document.body;
    const audioPlayer = document.getElementById("theme-audio");
    const daySong = "Assets/One Love (Official Audio).mp3";
    const nightSong = "Assets/One Kiss (Official Video).mp3";

    /* Load Theme + Song */
    function loadThemeState() {
      const savedTheme = localStorage.getItem("theme") || "day";
      const savedSong = localStorage.getItem("song") || daySong;

      if(savedTheme === "day"){
        body.classList.add("day-theme");
        body.style.backgroundImage = "url('Assets/DayBG.jpg')";
        document.getElementById("toggle-theme").textContent = "üåô";
      } else {
        body.classList.add("night-theme");
        body.style.backgroundImage = "url('Assets/NightBG.jpg')";
        document.getElementById("toggle-theme").textContent = "‚òÄÔ∏è";
      }
      audioPlayer.src = savedSong;
      audioPlayer.play();
    }

    /* Toggle Theme */
    document.getElementById("toggle-theme").addEventListener("click", ()=>{
      if(body.classList.contains("day-theme")){
        body.classList.remove("day-theme"); body.classList.add("night-theme");
        body.style.backgroundImage = "url('Assets/NightBG.jpg')";
        document.getElementById("toggle-theme").textContent = "‚òÄÔ∏è";
        audioPlayer.src = nightSong;
      } else {
        body.classList.remove("night-theme"); body.classList.add("day-theme");
        body.style.backgroundImage = "url('Assets/DayBG.jpg')";
        document.getElementById("toggle-theme").textContent = "üåô";
        audioPlayer.src = daySong;
      }
      audioPlayer.play();
      localStorage.setItem("theme", body.classList.contains("day-theme") ? "day" : "night");
      localStorage.setItem("song", audioPlayer.src);
    });

    /* Populate Gallery */
    const gallery = document.getElementById("gallery");
    for(let i=1; i<=29; i++){
      const img = document.createElement("img");
      img.src = `Assets/PN${i}.jpg`;
      img.alt = `PN${i}`;
      img.addEventListener("click", ()=>{
        document.getElementById("lightbox-img").src = img.src;
        document.getElementById("lightbox").style.display = "flex";
      });
      gallery.appendChild(img);
    }
    document.getElementById("lightbox").addEventListener("click", ()=>{
      document.getElementById("lightbox").style.display = "none";
    });

    /* Heart Button Logic */
    const heartPopup = document.getElementById("heart-popup");
    document.getElementById("send-heart").addEventListener("click", ()=>{
      heartPopup.style.display = "block";
    });

    document.getElementById("confirm-heart").addEventListener("click", ()=>{
      heartPopup.style.display = "none";

      // Example Mail API Request
      fetch("https://your-api-endpoint/send-hearts", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message: "Infinite hearts from Album page üíñ" })
      }).then(res => console.log("Hearts sent!"))
        .catch(err => console.error("Error:", err));

      // Infinite hearts animation
      let heartInterval = setInterval(()=>{
        const h = document.createElement("div");
        h.className = "flying-heart";
        h.textContent = "‚ù§Ô∏è";
        h.style.left = (Math.random()*window.innerWidth) + "px";
        h.style.top = (window.innerHeight-50) + "px";
        h.style.fontSize = (14 + Math.random()*24) + "px";
        document.body.appendChild(h);
        setTimeout(()=> h.remove(), 1400);
      }, 300);

      // Stop after 10s
      setTimeout(()=> clearInterval(heartInterval), 10000);
    });

    /* Stars */
    document.getElementById("send-star").addEventListener("click", ()=>{
      const star = document.createElement("div");
      star.textContent = "‚≠ê";
      star.style.position = "fixed";
      star.style.left = (Math.random()*window.innerWidth)+"px";
      star.style.top = (Math.random()*window.innerHeight)+"px";
      star.style.fontSize = "24px";
      document.body.appendChild(star);
      setTimeout(()=> star.remove(), 2000);
    });

    /* Petals */
    document.getElementById("send-petal").addEventListener("click", ()=>{
      const petal = document.createElement("div");
      petal.textContent = "üå∏";
      petal.style.position = "fixed";
      petal.style.left = (Math.random()*window.innerWidth)+"px";
      petal.style.top = "0px";
      petal.style.fontSize = "20px";
      petal.style.animation = "fall 3s linear";
      document.body.appendChild(petal);
      setTimeout(()=> petal.remove(), 3000);
    });

    /* Petal Falling Animation */
    const style = document.createElement("style");
    style.innerHTML = `
      @keyframes fall {
        from { transform: translateY(0); opacity: 1; }
        to { transform: translateY(100vh); opacity: 0; }
      }
    `;
    document.head.appendChild(style);

    /* Init */
    window.addEventListener("load", loadThemeState);
  </script>
</body>
</html>
